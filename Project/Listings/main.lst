C51 COMPILER V9.60.0.0   MAIN                                                              01/22/2022 16:14:09 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Source\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Include) DEFINE(FOSC_16
                    -0000) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          
   2          /*
   3           * Copyright (c) 2021
   4           * VitechSolutions
   5           * All Rights Reserved
   6           *
   7           *
   8           * Description:
   9           *
  10           * Author: TuanNA
  11           *
  12           */
  13          #include "N76E003.h"
  14          #include "Common.h"
  15          #include "Delay.h"
  16          #include "SFR_Macro.h"
  17          #include "Function_define.h"
  18          #include "string.h"
  19          
  20          #define UART0_BAUD 9600
  21          #define UART1_BAUD 9600
  22          #define MOTO P10
  23          
  24          char *motorStart = "MOTOR_START\r\n"; //12
  25          char *motorStop = "MOTOR_STOP\r\n";   //11
  26          volatile UINT8 Status = 0;
  27          volatile UINT8 BeepCount = 0;
  28          
  29          void UART0_SendData(UINT8 *buff, UINT8 len) // USB2COM port
  30          {
  31   1          UINT8 i;
  32   1          for (i = 0; i < len; i++)
  33   1          {
  34   2              Send_Data_To_UART0(buff[i]);
  35   2              Timer2_Delay500us(1);
  36   2          }
  37   1      }
  38          
  39          void main(void)
  40          {
  41   1          P10_Quasi_Mode;
  42   1          InitialUART0_Timer1(UART0_BAUD); //initialization
  43   1          InitialUART1_Timer3(UART1_BAUD);
  44   1          set_ES; //For interrupt enable
  45   1          set_ES_1;
  46   1          set_EA;
  47   1          Timer0_Delay1ms(1000);
  48   1          while (1)
  49   1          {
  50   2              if (MOTO != 0)
  51   2              {
  52   3                  BeepCount++;          
  53   3                  
  54   3              }
C51 COMPILER V9.60.0.0   MAIN                                                              01/22/2022 16:14:09 PAGE 2   

  55   2              if((BeepCount > 2)&&(Status==0))
  56   2              {
  57   3                  clr_ES;
  58   3                  UART0_SendData((UINT8 *)motorStart, strlen(motorStart));
  59   3                  set_ES;
  60   3                  Status = 1;
  61   3                  BeepCount = 0;
  62   3              }
  63   2              if((BeepCount != 0)&&(Status == 1))
  64   2              {
  65   3                  clr_ES;
  66   3                  UART0_SendData((UINT8 *)motorStop, strlen(motorStop));
  67   3                  set_ES;
  68   3                  Status = 0;
  69   3                  BeepCount = 0;
  70   3              }
  71   2          }
  72   1      }
  73          
  74          void SerialPort_ISR(void) interrupt 4
  75          {
  76   1          if (RI)
  77   1          {
  78   2              clr_RI;
  79   2              clr_ES_1;
  80   2              Send_Data_To_UART1(SBUF);
  81   2              set_ES_1;
  82   2          }
  83   1          if (TI)
  84   1          {
  85   2              clr_TI;
  86   2          }
  87   1      }
  88          void SerialPort1_ISR(void) interrupt 15
  89          {
  90   1          if (RI_1)
  91   1          {
  92   2              clr_RI_1;
  93   2              clr_ES;
  94   2              Send_Data_To_UART0(SBUF_1);
  95   2              set_ES;
  96   2          }
  97   1          if (TI_1)
  98   1          {
  99   2              clr_TI_1;
 100   2          }
 101   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    346    ----
   CONSTANT SIZE    =     27    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
